# CogniGraph 使用指南

## 📝 快速上手教程

### 第一次使用

#### 1. 环境准备（只需一次）

```bash
# 1. 安装依赖
pip install -r requirements.txt

# 2. 配置API密钥
# 编辑 .env 文件，填入你的 DeepSeek API Key
DEEPSEEK_API_KEY=你的密钥

# 3. 下载模型（如果model文件夹不存在）
python download_model.py
```

#### 2. 启动服务

```bash
python app.py
```

看到以下信息表示启动成功：
```
 * Running on http://127.0.0.1:5000
```

#### 3. 打开浏览器

访问：`http://localhost:5000`

---

## 🎯 详细使用流程

### 步骤 1: 上传文本文件

1. 准备一个 `.txt` 文本文件
   - 推荐文本长度：500-5000字
   - 内容要求：有明确的主题和概念
   - 编码格式：UTF-8

2. 点击"选择文件"按钮
3. 选择你的文本文件
4. 点击"上传"按钮

**示例文本内容：**
```
人工智能（Artificial Intelligence，简称AI）是计算机科学的一个分支。
它企图了解智能的实质，并生产出一种新的能以人类智能相似的方式做出
反应的智能机器。该领域的研究包括机器人、语言识别、图像识别、
自然语言处理和专家系统等...
```

### 步骤 2: 构建知识图谱

1. 上传成功后，"开始构建"按钮会变为可用
2. 点击"开始构建"按钮
3. 等待1-2分钟（AI正在分析文本）
4. 看到"图谱构建成功"提示

**构建过程中发生了什么？**
- DeepSeek AI 分析文本内容
- 自动识别实体（人物、组织、地点、概念等）
- 提取实体之间的关系
- 生成结构化的图谱数据

### 步骤 3: 选择可视化方式

#### 3.1 交互式2D图谱（推荐）

- **特点**：平面展示，清晰直观
- **操作**：
  - 鼠标悬停查看节点详情
  - 滚轮缩放
  - 拖拽平移
  - 节点大小 = 连接数
  - 节点颜色 = 实体类型

**布局算法选择：**
- **语义布局**（推荐）：根据词向量相似度布局，语义相近的实体靠近
- **力导向布局**：模拟物理引力，自然分布
- **环形布局**：节点排列成圆形
- **Kamada-Kawai**：优化节点距离
- **谱布局**：基于图的谱特性

#### 3.2 交互式3D图谱

- **特点**：三维空间，更多维度
- **操作**：
  - 鼠标拖拽旋转
  - 滚轮缩放
  - 从多角度观察关系

#### 3.3 语义相似度热力图

- **特点**：展示实体间语义相似度
- **用途**：
  - 发现隐藏的语义关联
  - 识别相似概念
  - 颜色深 = 相似度高

#### 3.4 实体词云

- **特点**：按重要性展示实体
- **说明**：
  - 字体越大 = 越重要
  - 根据连接数确定大小
  - 快速识别核心概念

### 步骤 4: 图谱分析

点击"分析图谱"按钮，获取深度分析报告：

#### 4.1 基本统计
- 节点数、边数
- 图密度（连接紧密程度）
- 平均度数（平均每个节点的连接数）
- 连通性（图是否完全连通）

#### 4.2 中心性分析

**度中心性 (Degree Centrality)**
- 含义：直接连接最多的实体
- 用途：找到"人脉最广"的概念

**介数中心性 (Betweenness Centrality)**
- 含义：最具桥梁作用的实体
- 用途：找到"关键节点"

**接近中心性 (Closeness Centrality)**
- 含义：到其他节点平均距离最短
- 用途：找到"中心位置"的概念

**PageRank**
- 含义：综合重要性评分
- 用途：找到最重要的实体

#### 4.3 社区检测
- 自动识别密切相关的实体群组
- 发现知识的模块化结构

#### 4.4 类型分布
- 统计各类型实体的数量
- 了解知识结构的构成

---

## 💡 使用技巧

### 1. 如何获得更好的图谱？

**文本准备：**
- ✅ 内容完整，有明确主题
- ✅ 包含丰富的实体和关系
- ✅ 逻辑清晰，结构完整
- ❌ 过短（<300字）效果不佳
- ❌ 过长（>10000字）处理慢

**最佳文本长度：** 1000-3000字

### 2. 如何选择布局算法？

| 布局算法 | 适用场景 | 优点 |
|---------|---------|------|
| 语义布局 | 概念分析 | 相似概念聚集 |
| 力导向 | 一般用途 | 自然美观 |
| 环形 | 层次结构 | 清晰对称 |
| Kamada-Kawai | 小规模图 | 距离优化 |
| 谱布局 | 社区发现 | 突出群组 |

### 3. 如何理解可视化结果？

**节点（圆点）：**
- 蓝色 = 人物
- 绿色 = 组织
- 红色 = 地点
- 橙色 = 事件
- 灰色 = 概念

**连线（箭头）：**
- 表示实体间的关系
- 箭头指向关系的方向
- 悬停查看关系描述

**节点大小：**
- 越大 = 连接越多
- 表示在图谱中的重要性

### 4. 常见使用场景示例

#### 场景 1: 学习笔记整理
1. 上传课程章节文本
2. 使用"语义布局"查看概念关系
3. 用"中心性分析"找核心概念
4. 导出图谱作为复习资料

#### 场景 2: 文献综述
1. 上传文献摘要或综述
2. 用"3D图谱"全方位观察
3. 用"社区检测"找研究主题
4. 用"热力图"发现相关研究

#### 场景 3: 小说分析
1. 上传小说章节
2. 蓝色节点查看人物关系
3. 用"PageRank"找主角
4. 用"词云"看重要人物

---

## 🔧 高级功能

### 导出功能（即将支持）
- 导出图谱为PNG/SVG
- 导出图谱数据为JSON
- 导出分析报告为PDF

### 批量处理（即将支持）
- 上传多个文件
- 批量生成图谱
- 对比分析

### 自定义配置（即将支持）
- 调整实体类型颜色
- 自定义布局参数
- 设置可视化样式

---

## ❓ 常见问题解答

### Q: 为什么我的图谱节点很少？
A: 可能的原因：
- 文本太短，概念不够丰富
- 文本结构简单，关系不明显
- AI提取不够准确

**解决方法：**
- 增加文本长度
- 使用更结构化的文本
- 重新构建图谱尝试

### Q: 图谱太乱看不清怎么办？
A:
- 切换不同的布局算法
- 使用缩放功能放大查看
- 尝试3D图谱从不同角度观察
- 查看热力图或词云获得概览

### Q: 构建图谱失败怎么办？
A: 检查：
1. API Key是否正确配置
2. 网络连接是否正常
3. 文本编码是否为UTF-8
4. 查看控制台错误信息

### Q: 如何保存可视化结果？
A:
- 右键点击图谱 → 保存图片
- HTML交互图谱会保存在 `outputs/` 文件夹
- 静态图片会保存在 `outputs/` 文件夹

---

## 📞 获取帮助

遇到问题？
1. 查看 [README.md](README.md) 完整文档
2. 提交 [Issue](https://github.com/lsy999999999/CogniGraph/issues)
3. 查看示例文件：`document.txt`

---

## 🎓 学习资源

想深入了解技术原理？

- **词向量**：[Sentence Transformers文档](https://www.sbert.net/)
- **图论算法**：[NetworkX教程](https://networkx.org/documentation/)
- **知识图谱**：[知识图谱入门](https://www.zhihu.com/topic/19801764)
- **DeepSeek API**：[DeepSeek文档](https://platform.deepseek.com/docs)

---

<p align="center">
  祝你使用愉快！🎉
</p>
